---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import FormattedDate from "./FormattedDate.astro";

const { BASE_URL } = import.meta.env;

const posts = (await getCollection("blog")).sort(
	(a, b) => a.data.publishDate.valueOf() - b.data.publishDate.valueOf(),
);
---

<section>
	{
		posts.map(({ slug, data }) => (
			<a href={`${BASE_URL}/posts/${slug}/`}>
				<Image
					width={720}
					height={360}
					src={data.image}
					alt={data.title}
				/>
				<h4 class="title">{data.title}</h4>
				<FormattedDate date={data.publishDate} />
			</a>
		))
	}
</section>
