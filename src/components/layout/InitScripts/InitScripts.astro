---
const isProd = import.meta.env.PROD;
---

<script>
	import "overlayscrollbars/overlayscrollbars.css";
	import { OverlayScrollbars } from "overlayscrollbars";
	import { getTheme, setTheme } from "../../../utils/setting-utils";
	import { overlayScrollbarsTheme } from "./InitScripts.css";

	function loadTheme() {
		const theme = getTheme();
		setTheme(theme);
	}

	function initCustomScrollbar() {
		OverlayScrollbars(
			{
				target: document.body
			},
			{
				scrollbars: {
					theme: overlayScrollbarsTheme,
				},
			},
		);
	}

	function init() {
		loadTheme();
		// initCustomScrollbar();
	}

	/* Load settings when entering the site */
	init();

	/* Load settings before swapping */
	/* astro:after-swap event happened before swap animation */
	document.addEventListener("astro:after-swap", init);

	// const setup = () => {
	// 	// Remove the delay for the first time page load
	// 	window.swup.hooks.on("link:click", () => {
	// 		document.documentElement.style.setProperty(
	// 			"--content-delay",
	// 			"0ms",
	// 		);
	// 	});
	// };
	// if (window?.swup?.hooks) {
	// 	setup();
	// } else {
	// 	document.addEventListener("swup:enable", setup);
	// }


</script>

{isProd &&
	<script type="text/partytown" src="https://www.googletagmanager.com/gtag/js?id=G-WND45XZ8GC"></script>
	<script type="text/partytown">
		window.dataLayer = window.dataLayer || [];
		window.gtag = function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-WND45XZ8GC');
	</script>
}